{% extends "base.html" %}

{% block title %}–ì–æ–ª–æ–≤–Ω–∞{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1 class="card-title">–û—Å—Ç–∞–Ω–Ω—ñ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó</h1>
        <p class="card-subtitle">–ù–∞–π–Ω–æ–≤—ñ—à—ñ –ø–æ—Å—Ç–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ</p>
    </div>

    {% if posts %}
        <div class="posts-grid">
            {% for post in posts %}
                <a href="{{ url_for('posts.view_post', slug=post.slug) }}" class="post-card">
                    <h2 class="post-card-title">{{ post.title }}</h2>
                    {% if post.summary %}
                        <p class="post-card-summary">
                            {{ post.summary }}
                            {% if post.ai_generated %}
                                <span style="font-size: 11px; color: var(--primary); margin-left: 4px;">ü§ñ</span>
                            {% endif %}
                        </p>
                    {% else %}
                        <p class="post-card-summary">{{ post.content[:150] }}...</p>
                    {% endif %}
                    <div class="post-card-meta">
                        <span>üë§ {{ post.author.get_display_name() }}</span>
                        <span>üìÖ {{ post.published_at.strftime('%d.%m.%Y') }}</span>
                        <span>üëÅÔ∏è {{ post.view_count }}</span>
                    </div>
                </a>
            {% endfor %}
        </div>
        
        <div class="text-center mt-3">
            <a href="{{ url_for('posts.list_posts') }}" class="btn btn--primary">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –ø–æ—Å—Ç–∏</a>
        </div>
    {% else %}
        <div class="text-center">
            <p class="text-muted mb-2">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –ø—É–±–ª—ñ–∫–∞—Ü—ñ–π</p>
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('posts.show_create') }}" class="btn btn--primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–µ—Ä—à–∏–π –ø–æ—Å—Ç</a>
            {% else %}
                <a href="{{ url_for('auth.show_register') }}" class="btn btn--primary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</a>
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}

