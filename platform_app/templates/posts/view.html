{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="card">
    <div class="post-header">
        <h1 class="post-title">{{ post.title }}</h1>
        <div class="post-meta">
            <span>üë§ <a href="{{ url_for('users.view_profile', username=post.author.username) }}">{{ post.author.get_display_name() }}</a></span>
            <span>üìÖ {{ post.published_at.strftime('%d.%m.%Y –æ %H:%M') }}</span>
            <span>üëÅÔ∏è {{ post.view_count }} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</span>
        </div>
    </div>

    {% if post.summary %}
        <div style="padding: 16px; background: var(--bg-dark); border-left: 4px solid var(--primary); border-radius: var(--radius); margin-bottom: 24px;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                <strong style="color: var(--text);">–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å:</strong>
                {% if post.ai_generated %}
                    <span style="font-size: 12px; padding: 2px 8px; background: var(--primary); color: white; border-radius: 12px;">ü§ñ –®–Ü</span>
                {% endif %}
            </div>
            <p style="color: var(--text-light); margin: 0; line-height: 1.6;">{{ post.summary }}</p>
        </div>
    {% endif %}

    <div class="post-content">
        {{ post.content }}
    </div>

    {% if post.get_tags_list() %}
        <div class="post-tags">
            {% for tag in post.get_tags_list() %}
                <span class="tag">#{{ tag }}</span>
            {% endfor %}
        </div>
    {% endif %}

    {% if current_user.is_authenticated and current_user.id == post.author_id %}
        <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border);">
            <a href="{{ url_for('posts.show_edit', slug=post.slug) }}" class="btn btn--outline">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
            <form method="POST" action="{{ url_for('posts.process_delete', slug=post.slug) }}" style="display: inline;" onsubmit="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –ø–æ—Å—Ç?');">
                <button type="submit" class="btn btn--danger">–í–∏–¥–∞–ª–∏—Ç–∏</button>
            </form>
        </div>
    {% endif %}
</div>

<div class="text-center">
    <a href="{{ url_for('posts.list_posts') }}" class="btn btn--outline">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a>
</div>
{% endblock %}

